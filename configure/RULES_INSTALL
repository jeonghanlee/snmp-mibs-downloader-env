
install: dirs installbins
	$(INSTALL) -m 755 $(BINFILES)  $(DESTDIR)/usr/bin
	$(INSTALL) -m 644 $(CONFFILES) $(DESTDIR)/etc/snmp-mibs-downloader
	cp $(SRC_PATH)/mibrfcs/*       $(DESTDIR)/usr/share/snmp/mibs-downloader/mibrfcs
	cp $(SRC_PATH)/mibiana/*       $(DESTDIR)/usr/share/snmp/mibs-downloader/mibiana
	gzip -n9                       $(DESTDIR)/usr/share/snmp/mibs-downloader/mibrfcs/*
	gzip -n9                       $(DESTDIR)/usr/share/snmp/mibs-downloader/mibiana/*
	ln -s /var/lib/mibs/ietf       $(DESTDIR)/usr/share/snmp/mibs/ietf
	ln -s /var/lib/mibs/iana       $(DESTDIR)/usr/share/snmp/mibs/iana


clean: $(BINFILES)
	rm -rf $(DESTDIR)$(REPO_BASE)
	rm -rf $(DESTDIR)$(REPO_DOWNLOADER_BASE)

installbins: $(BINFILES)
	$(INSTALL) -m 755 $(BINFILES)  $(DESTDIR)/usr/bin

$(BINFILES): 
	rm -f  $(DESTDIR)/usr/bin/$@

dirs:
	mkdir -p $(DESTDIR)$(REPO_BASE)
	mkdir -p $(DESTDIR)$(REPO_DOWNLOADER_BASE)/mib{rfcs,iana}

.PHONY : install clean dirs $(BINFILES)
